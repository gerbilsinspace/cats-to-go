webpackJsonp([1],{0:function(t,e,a){t.exports=a("NHnr")},"4+hh":function(t,e){},AnE8:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("/5sW"),r=a("Lgyv"),i=a.n(r),c=(a("4+hh"),a("AnE8"),a("y9m4"),a("fx22"),a("a4gv")),s=a.n(c);function o(){"indexedDB"in window&&(s.a.open("metadata",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore("metadata",{keyPath:"id"}),t.transaction.objectStore("metadata").createIndex("rating","rating",{unique:!1});break;default:}}),s.a.open("gifs",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore("gifs",{keyPath:"id"});break;default:}}))}function d(t,e){"indexedDB"in window&&s.a.open(t,1).then(function(a){var n=a.transaction(t,"readwrite"),r=n.objectStore(t);return Promise.all(e.map(function(e){return"blob"===e.type?window.fetch(e.url).then(function(t){return t.blob()}).then(function(n){var r=a.transaction(t,"readwrite"),i=r.objectStore(t);return i.add({id:e.id,gif:n})}):r.add(e)})).catch(function(){return n.abort()})})}function u(t){if("indexedDB"in window){var e=s.a.open(t,1);return e.then(function(e){return e.transaction(t).objectStore(t).getAll()})}}a("gbyG"),a("Gh7F");var f=a("rzQm"),l=a.n(f),v=(a("U6qc"),{name:"cats",data:function(){return{cats:[],savedCats:[],error:!1}},created:function(){this.getCats()},methods:{getCats:function(){var t=this;fetch("https://api.giphy.com/v1/gifs/search?api_key=xWw0i2Ch0K5rqrUkBc7sCOAS4OKcILIc&q=cat&limit=10&offset=0&rating=G&lang=en").then(function(t){return t.json()}).then(function(e){t.cats=e.data}).catch(function(){t.error="You appear to be offline, here are your saved cats...",u("gifs").then(function(e){t.savedCats=e.map(function(t){return t.id}),t.cats=e,e.forEach(function(e){var a=new FileReader;a.addEventListener("loadend",function(){var n=t.cats.findIndex(function(t){return t.id===e.id});t.cats[n]={id:e.id,gif:a.result,blobReady:!0},t.cats=l()(t.cats)}),a.readAsDataURL(e.gif)})})})},saveCat:function(t){this.savedCats.includes(t.id)?this.savedCats.splice(this.savedCats.indexOf(t.id),1):(this.savedCats.push(t.id),d("metadata",[t]),d("gifs",[t].map(function(t){return{type:"blob",id:t.id,url:t.images.fixed_height.url}})))}}}),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cat-container"},[t.error?a("md-card",{staticClass:"error-card"},[a("h1",[t._v(t._s(t.error))])]):t._e(),t._l(t.cats,function(e){return a("md-card",{key:e.id},[a("md-card-media-cover",{attrs:{"md-solid":""}},[a("md-card-media",[t.error?t._e():a("img",{attrs:{src:e.images.fixed_height.url}}),e.blobReady?a("img",{attrs:{src:e.gif}}):t._e()]),a("md-card-area",[a("md-card-actions",[a("md-button",{nativeOn:{click:function(a){t.saveCat(e)}}},[t.savedCats.includes(e.id)?t._e():a("span",[t._v("Save Cat")]),t.savedCats.includes(e.id)?a("span",[t._v("[Saved]")]):t._e()])],1)],1)],1)],1)})],2)},h=[],m=a("XyMi");function g(t){a("jvAv")}var b=!1,C=g,_=null,w=null,y=Object(m["a"])(v,p,h,b,C,_,w),j=y.exports;n["default"].use(i.a),o();var x={name:"app",components:{Cats:j}},k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("md-app",[a("md-app-toolbar",{staticClass:"md-primary"},[a("span",{staticClass:"md-title"},[t._v("Cats To Go")])]),a("md-app-content",[a("Cats")],1)],1)],1)},O=[],S=!1,A=null,E=null,q=null,B=Object(m["a"])(x,k,O,S,A,E,q),D=B.exports;n["default"].config.productionTip=!1,"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js"),new n["default"]({render:function(t){return t(D)}}).$mount("#app")},jvAv:function(t,e){}},[0]);
//# sourceMappingURL=app.4255b17b.js.map