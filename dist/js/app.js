webpackJsonp([1],{0:function(t,e,n){t.exports=n("NHnr")},"4+hh":function(t,e){},AnE8:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/5sW"),i=n("Lgyv"),r=n.n(i),o=(n("4+hh"),n("AnE8"),n("y9m4"),n("fx22"),n("a4gv")),s=n.n(o);function c(){"indexedDB"in window&&(s.a.open("metadata",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore("metadata",{keyPath:"id"}),t.transaction.objectStore("metadata").createIndex("rating","rating",{unique:!1});break;default:}}),s.a.open("gifs",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore("gifs",{keyPath:"id"});break;default:}}))}function d(t,e){"indexedDB"in window&&s.a.open(t,1).then(function(n){var a=n.transaction(t,"readwrite"),i=a.objectStore(t);return Promise.all(e.map(function(e){return"blob"===e.type?window.fetch(e.url).then(function(t){return t.blob()}).then(function(a){var i=n.transaction(t,"readwrite"),r=i.objectStore(t);return r.add({id:e.id,gif:a})}):i.add(e)})).catch(function(){return a.abort()})})}function u(t){if("indexedDB"in window){var e=s.a.open(t,1);return e.then(function(e){return e.transaction(t).objectStore(t).getAll()})}}n("gbyG"),n("Gh7F");var f=n("rzQm"),l=n.n(f),v=(n("U6qc"),{name:"cats",data:function(){return{cats:[],savedCats:[],error:!1}},created:function(){this.getCats()},methods:{getCats:function(){var t=this;fetch("https://api.giphy.com/v1/gifs/search?api_key=xWw0i2Ch0K5rqrUkBc7sCOAS4OKcILIc&q=cat&limit=10&offset=0&rating=G&lang=en").then(function(t){return t.json()}).then(function(e){t.cats=e.data}).catch(function(){t.error="You appear to be offline, here are your saved cats...",u("gifs").then(function(e){t.savedCats=e.map(function(t){return t.id}),t.cats=e,e.forEach(function(e){var n=new FileReader;n.addEventListener("loadend",function(){var a=t.cats.findIndex(function(t){return t.id===e.id});t.cats[a]={id:e.id,gif:n.result,blobReady:!0},t.cats=l()(t.cats)}),n.readAsDataURL(e.gif)})})})},saveCat:function(t){this.savedCats.includes(t.id)?this.savedCats.splice(this.savedCats.indexOf(t.id),1):(this.savedCats.push(t.id),d("metadata",[t]),d("gifs",[t].map(function(t){return{type:"blob",id:t.id,url:t.images.fixed_height.url}})))}}}),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cat-container"},[t.error?n("md-card",{staticClass:"error-card"},[n("h1",[t._v(t._s(t.error))])]):t._e(),t._l(t.cats,function(e){return n("md-card",{key:e.id},[n("md-card-media-cover",{attrs:{"md-solid":""}},[n("md-card-media",[t.error?t._e():n("img",{attrs:{src:e.images.fixed_height.url}}),e.blobReady?n("img",{attrs:{src:e.gif}}):t._e()]),n("md-card-area",[n("md-card-actions",[n("md-button",{nativeOn:{click:function(n){t.saveCat(e)}}},[t.savedCats.includes(e.id)?t._e():n("span",[t._v("Save Cat")]),t.savedCats.includes(e.id)?n("span",[t._v("[Saved]")]):t._e()])],1)],1)],1)],1)})],2)},h=[],m=n("XyMi");function g(t){n("jvAv")}var b=!1,C=g,_=null,w=null,y=Object(m["a"])(v,p,h,b,C,_,w),j=y.exports;a["default"].use(r.a),c();var x,k={name:"app",components:{Cats:j}},O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("md-app",[n("md-app-toolbar",{staticClass:"md-primary"},[n("span",{staticClass:"md-title"},[t._v("Cats To Go")])]),n("md-app-content",[n("Cats")],1)],1)],1)},S=[],A=!1,E=null,q=null,N=null,P=Object(m["a"])(k,O,S,A,E,q,N),B=P.exports;(a["default"].config.productionTip=!1,"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js"),"Notification"in window)&&Notification.requestPermission(function(t){x=t,console.log("Notification permission status:",x)});new a["default"]({render:function(t){return t(B)}}).$mount("#app")},jvAv:function(t,e){}},[0]);
//# sourceMappingURL=app.15f44dc4.js.map